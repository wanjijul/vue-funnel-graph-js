var VueFunnelGraph=function(t,e,a,n,i,s){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var r={name:"VueFunnelGraph",props:{animated:{type:Boolean,default:!1},width:[String,Number],height:[String,Number],values:Array,labels:Array,colors:{type:Array,default:function(){return[]}},subLabels:Array,subLabelValue:{type:String,default:"percent"},direction:{type:String,default:"horizontal"},gradientDirection:{type:String,default:"horizontal"},displayPercentage:{type:Boolean,default:!0}},data:function(){return{paths:[],prevPaths:[],graph:null,tween:null,defaultColors:s.getDefaultColors(10)}},computed:{valuesFormatted:function(){return this.graph.is2d()?this.graph.getValues2d().map(function(t){return Number.isInteger(t)?i.formatNumber(t):t}):this.values.map(function(t){return Number.isInteger(t)?i.formatNumber(t):t})},colorSet:function(){for(var t=[],e=0,a=0;a<this.paths.length;a++){var n=this.graph.is2d()?this.getColors[a]:this.getColors,i="string"==typeof n||1===n.length?"solid":"gradient";"gradient"===i&&(e+=1),t.push({values:n,fillMode:i,fill:"solid"===i?n:"url('#funnelGradient-"+e+"')"})}return t},gradientSet:function(){var t=[];return this.colorSet.forEach(function(e){"gradient"===e.fillMode&&t.push(e)}),t},getColors:function(){return this.colors instanceof Array&&0===this.colors.length?s.getDefaultColors(this.is2d()?this.values[0].length:2):this.colors.length<this.paths.length?[].concat(this.colors).concat([].concat(this.defaultColors).splice(this.paths.length,this.paths.length-this.colors.length)):this.colors},gradientAngle:function(){return"rotate("+("vertical"===this.gradientDirection?90:0)+")"}},methods:{getRandom:function(){return Math.random()},enterTransition:function(t,e){this.animated||e(),setTimeout(function(){return e()},700)},leaveTransition:function(t,e){this.animated||e(),setTimeout(function(){return e()},700)},is2d:function(){return this.graph.is2d()},percentages:function(){return this.graph.createPercentages()},twoDimPercentages:function(){return this.is2d()?this.graph.getPercentages2d():[]},subLabelBackgrounds:function(t){return this.is2d()?s.generateLegendBackground(this.getColors[t],this.gradientDirection):[]},offsetColor:function(t,e){return Math.round(100*t/(e-1))+"%"},makeAnimations:function(){var t=this;null!==this.tween&&this.tween.stop();var n=[],i=this.prevPaths.length!==this.paths.length,s={x:.5,y:.5};i&&(s={x:0,y:.5},this.graph.isVertical()&&(s={x:1,y:1}),this.graph.is2d()||(s={x:0,y:1})),this.paths.forEach(function(a,r){var l=t.prevPaths[r]||t.graph.getPathMedian(r);i&&(l=t.graph.getPathMedian(r));var o=e.interpolate([l,a],{addPoints:1,origin:s,optimize:"fill",precision:1});n.push(o)});var r={value:0};this.tween=new a.Tween(r).to({value:1},700).easing(a.Easing.Cubic.InOut).onUpdate(function(){for(var e=0;e<t.paths.length;e++)t.$set(t.paths,e,n[e](r.value))}),this.tween.start(),function t(){a.update()&&requestAnimationFrame(t)}()},drawPaths:function(){var t=this;this.prevPaths=this.paths,this.paths=[],this.graph.getPathDefinitions().forEach(function(e){t.paths.push(e)})}},created:function(){this.graph=new n({height:this.height,width:this.width,direction:this.direction,data:{labels:this.labels,values:this.values}}),this.drawPaths(),this.animated&&this.makeAnimations()},watch:{values:function(){this.graph.setValues(this.values),this.drawPaths(),this.animated&&this.makeAnimations()},direction:function(){this.graph.setDirection(this.direction).setWidth(this.width).setHeight(this.height),this.drawPaths()}},filters:{format:function(t){return Number.isInteger(t)?i.formatNumber(t):t}}};var l=function(t,e,a,n,i,s,r,l,o,c){"boolean"!=typeof r&&(o=l,l=r,r=!1);var u,d="function"==typeof a?a.options:a;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),n&&(d._scopeId=n),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,o(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=u):e&&(u=r?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,l(t))}),u)if(d.functional){var h=d.render;d.render=function(t,e){return u.call(e),h(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return a},o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var c=document.head||document.getElementsByTagName("head")[0],u={};var d=l({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"funnel svg-funnel-js",class:{"svg-funnel-js--vertical":"vertical"===t.direction}},[a("div",{staticClass:"svg-funnel-js__container"},[a("svg",{attrs:{width:t.width,height:t.height}},[a("defs",t._l(t.gradientSet,function(e,n){return a("linearGradient",{key:"1"+n,attrs:{id:"funnelGradient-"+(n+1),gradientTransform:t.gradientAngle}},t._l(e.values,function(n,i){return a("stop",{key:"2"+i,attrs:{"stop-color":n,offset:t.offsetColor(i,e.values.length)}})}),1)}),1),t._v(" "),t._l(t.paths,function(e,n){return a("path",{key:"3"+n,attrs:{fill:t.colorSet[n].fill,stroke:t.colorSet[n].fill,d:e}})})],2)]),t._v(" "),a("transition-group",{staticClass:"svg-funnel-js__labels",attrs:{name:"appear",tag:"div"},on:{enter:t.enterTransition,leave:t.leaveTransition}},t._l(t.valuesFormatted,function(e,n){return a("div",{key:t.getRandom()+t.labels[n].toLowerCase().split(" ").join("-"),staticClass:"svg-funnel-js__label",class:"label-"+(n+1)},[a("div",{staticClass:"label__value",staticStyle:{color:"black"}},[t._v(t._s(e))]),t._v(" "),t.labels&&t.labels[n].toString().includes("⬇")?a("div",{staticClass:"label__title",staticStyle:{color:"#DD2C00","margin-top":"-4px"}},[a("i",{staticClass:"mdi mdi-arrow-down mdi-18px",staticStyle:{position:"relative",top:"2px"}}),t._v(" "),a("span",[t._v(" "+t._s(t.labels[n].replace("⬇",""))+" ")])]):t.labels&&t.labels[n].toString().includes("⬆")?a("div",{staticClass:"label__title",staticStyle:{color:"#43A047","margin-top":"-4px"}},[a("i",{staticClass:"mdi mdi-arrow-up mdi-18px",staticStyle:{position:"relative",top:"2px"}}),t._v(" "),a("span",[t._v(" "+t._s(t.labels[n].replace("⬆",""))+" ")])]):t.labels?a("div",{staticClass:"label__title",staticStyle:{color:"#8F9BB3"}},[t._v(t._s(t.labels[n]))]):t._e(),t._v(" "),t.displayPercentage&&100!==t.percentages()[n]?a("div",{staticClass:"label__percentage",staticStyle:{color:"#333333"}},[t._v("\n                "+t._s(t.percentages()[n])+"%\n            ")]):t._e(),t._v(" "),t.is2d()?a("div",{staticClass:"label__segment-percentages"},[a("ul",{staticClass:"segment-percentage__list"},t._l(t.subLabels,function(e,i){return a("li",{key:"5"+i},[t._v("\n                        "+t._s(e)+":\n                        "),"percent"===t.subLabelValue?a("span",{staticClass:"percentage__list-label"},[t._v(t._s(t.twoDimPercentages()[n][i])+"%")]):a("span",{staticClass:"percentage__list-label"},[t._v(t._s(t._f("format")(t.values[n][i])))])])}),0)]):t._e()])}),0)],1)},staticRenderFns:[]},function(t){t&&t("data-v-4827acb9_0",{source:".appear-enter-active[data-v-4827acb9],.appear-leave-active[data-v-4827acb9]{transition:all .7s ease-in-out}.appear-enter-to[data-v-4827acb9],.appear-leave[data-v-4827acb9]{max-width:100%;max-height:100%;opacity:1}.appear-enter[data-v-4827acb9],.appear-leave-to[data-v-4827acb9]{max-width:0;max-height:0;opacity:0}.fade-enter-active[data-v-4827acb9],.fade-leave-active[data-v-4827acb9]{transition:all .3s ease}.fade-enter-to[data-v-4827acb9],.fade-leave[data-v-4827acb9]{opacity:1}.fade-enter[data-v-4827acb9],.fade-leave-to[data-v-4827acb9]{opacity:0}",map:void 0,media:void 0})},r,"data-v-4827acb9",!1,void 0,function(t){return function(t,e){return function(t,e){var a=o?e.media||"default":t,n=u[a]||(u[a]={ids:new Set,styles:[]});if(!n.ids.has(t)){n.ids.add(t);var i=e.source;if(e.map&&(i+="\n/*# sourceURL="+e.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),c.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(i),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var s=n.ids.size-1,r=document.createTextNode(i),l=n.element.childNodes;l[s]&&n.element.removeChild(l[s]),l.length?n.element.insertBefore(r,l[s]):n.element.appendChild(r)}}}(t,e)}},void 0),h=Object.freeze({__proto__:null,VueFunnelGraph:d});var p={install:function t(e){t.installed||(t.installed=!0,Object.keys(h).forEach(function(t){e.component(t,h[t])}))}},f=null;return"undefined"!=typeof window?f=window.Vue:"undefined"!=typeof global&&(f=global.Vue),f&&f.use(p),t.VueFunnelGraph=d,t.default=p,t}({},interpolate,TWEEN,FunnelGraph,formatNumber,getDefaultColors);
